# Markmap Enhanced 功能特性

本文档详细介绍 Markmap Enhanced 的所有功能特性和使用场景。

---

## 📋 目录

- [核心功能](#核心功能)
- [备注系统](#备注系统)
- [搜索系统](#搜索系统)
- [展开折叠系统](#展开折叠系统)
- [导出系统](#导出系统)
- [颜色主题系统](#颜色主题系统)
- [交互系统](#交互系统)
- [移动端支持](#移动端支持)
- [数据持久化](#数据持久化)
- [撤销重做系统](#撤销重做系统)
- [工具栏系统](#工具栏系统)

---

## 核心功能

### Markdown 解析

**支持的语法**：
- ✅ 标题（H1-H6）
- ✅ 列表（有序和无序）
- ✅ 代码块（带语法高亮）
- ✅ 数学公式（KaTeX）
- ✅ 复选框
- ✅ 链接和图片
- ✅ 粗体、斜体、删除线

**示例**：
```markdown
# 主题
## 子主题
- 要点 1
- 要点 2
  - 子要点
```

### 自动布局

**特性**：
- 🎯 初始化时自动居中
- 🎯 自动计算最佳缩放比例
- 🎯 内容变化时自动调整
- 🎯 窗口大小改变时自动适应
- 🎯 平滑动画过渡

**适用场景**：
- 不同屏幕尺寸的设备
- 动态内容更新
- 节点展开/折叠

### 响应式设计

**特性**：
- 📱 自动适应移动端
- 📱 工具栏响应式布局
- 📱 备注面板自适应
- 📱 触摸优化

---

## 备注系统

### 单行备注

**语法**：
```markdown
- 节点标题: 简短备注
```

**特点**：
- 使用冒号分隔
- 适合简短说明
- 显示备注图标
- 支持快速查看

**使用场景**：
- 添加简短定义
- 标注关键信息
- 提供快速参考

### 详细备注

**语法**：
```markdown
- 节点标题
  > 详细备注第一行
  > 详细备注第二行
  > 支持 **Markdown** 格式
```

**特点**：
- 使用引用块标记
- 支持多行内容
- 支持 Markdown 格式
- 适合详细说明

**使用场景**：
- 添加详细解释
- 记录相关证据
- 提供补充信息
- 包含格式化内容

### 混合备注

**语法**：
```markdown
- 节点标题: 简短说明
  > 详细的补充信息
  > 可以包含更多细节
```

**特点**：
- 同时使用两种备注
- 分层展示信息
- 灵活组织内容

**使用场景**：
- 需要概要和详情
- 分层信息展示
- 复杂知识点说明

### 备注编辑

**功能**：
- ✏️ 实时编辑
- ✏️ 自动保存
- ✏️ 撤销/重做
- ✏️ 格式预览

**操作流程**：
1. 点击备注图标
2. 在面板中编辑
3. 自动保存更改
4. 关闭面板

### 转义字符

**功能**：
- 支持转义特殊字符
- 默认使用反斜杠 `\`
- 自动处理导出

**示例**：
```markdown
- 时间\: 14:30: 这是备注
```
显示："时间: 14:30"

---

## 搜索系统

### 模糊搜索

**特性**：
- 🔍 模糊匹配算法
- 🔍 实时搜索结果
- 🔍 多字段搜索
- 🔍 大小写不敏感

**搜索范围**：
- 节点主内容
- 单行备注
- 详细备注

### 搜索高亮

**特性**：
- 🎨 高亮匹配节点
- 🎨 视觉突出显示
- 🎨 自定义高亮颜色
- 🎨 清晰的视觉反馈

### 自动展开

**特性**：
- 📂 自动展开匹配节点
- 📂 展开父节点路径
- 📂 确保结果可见
- 📂 保持其他节点状态

### 搜索导航

**功能**：
- ⬆️ 上一个结果
- ⬇️ 下一个结果
- 🔢 结果计数显示
- 🎯 自动滚动到结果

**快捷键**：
- `Enter`：下一个
- `Shift+Enter`：上一个
- `Esc`：清除搜索

---

## 展开折叠系统

### 节点级控制

**单节点操作**：
- 点击节点切换状态
- 快速展开/折叠
- 保持其他节点状态

**子树操作**：
- 右键菜单"展开全部"
- 右键菜单"折叠全部"
- 递归处理所有子节点

### 全局控制

**工具栏按钮**：
- ⊕ 展开全部节点
- ⊖ 折叠全部节点
- 一键控制整个思维导图

**快捷键**：
- `Ctrl+Shift+E` / `Cmd+Shift+E`：展开全部
- `Ctrl+Shift+C` / `Cmd+Shift+C`：折叠全部

### 智能布局

**特性**：
- 🎯 自动调整节点位置
- 🎯 平滑动画过渡
- 🎯 保持视图中心
- 🎯 优化可见性

**适用场景**：
- 浏览大型思维导图
- 专注特定内容
- 演示和讲解
- 打印和导出准备

---

## 导出系统

### Markdown 导出

**功能**：
- 📄 节点级导出
- 📄 保持层级结构
- 📄 保留备注格式
- 📄 复制到剪贴板

**格式保留**：
- 标题层级
- 列表缩进
- 备注分隔符
- 引用块格式

**使用场景**：
- 分享子树内容
- 备份特定部分
- 集成到其他文档
- 版本控制

### 图片导出

**支持格式**：
- 🖼️ PNG：适合网页和文档
- 🖼️ JPG：适合打印和分享
- 🖼️ SVG：矢量格式，可缩放

**特性**：
- 高质量输出
- 自定义分辨率
- 包含当前视图
- 自动下载

**使用场景**：
- 制作演示文稿
- 文档插图
- 社交媒体分享
- 打印输出

### 导出选项

**配置项**：
- 导出格式
- 图片质量
- 背景颜色
- 包含范围

---

## 颜色主题系统

### 预设主题

**Default（默认）**：
- 经典配色
- 适合大多数场景
- 良好的对比度

**Ocean（海洋）**：
- 蓝绿色调
- 清新淡雅
- 适合长时间查看

**Forest（森林）**：
- 绿色系
- 自然舒适
- 护眼配色

**Sunset（日落）**：
- 暖色调
- 温暖明亮
- 适合演示

**Monochrome（单色）**：
- 黑白灰
- 简洁专业
- 适合打印

### 主题切换

**特性**：
- 🎨 平滑颜色过渡
- 🎨 实时预览
- 🎨 自动保存选择
- 🎨 下次自动应用

### 颜色应用

**规则**：
- 节点颜色按层级循环
- 连接线继承父节点颜色
- 保持良好对比度
- 支持自定义颜色

---

## 交互系统

### 画布操作

**平移**：
- `Space` + 拖动
- 直接拖动空白区域
- 触摸单指拖动

**缩放**：
- 鼠标滚轮
- 触摸双指捏合
- 缩放中心跟随鼠标

**性能**：
- 流畅的 60fps
- 300ms 内响应
- 优化的渲染

### 节点交互

**点击**：
- 展开/折叠节点
- 快速切换状态
- 视觉反馈

**右键菜单**：
- 复制为 Markdown
- 展开全部
- 折叠全部

**备注交互**：
- 点击图标查看
- 面板内编辑
- 自动保存

### 上下文菜单

**节点菜单**：
- 复制操作
- 展开控制
- 折叠控制

**画布菜单**：
- 导出选项
- 视图控制
- 设置选项

---

## 移动端支持

### 触摸手势

**单指操作**：
- 拖动平移
- 点击节点
- 点击按钮

**双指操作**：
- 捏合缩放
- 旋转（可选）

**长按操作**：
- 显示菜单
- 选择节点
- 复制内容

### 屏幕适配

**横屏模式**：
- 宽屏布局
- 工具栏横向
- 最大化内容区

**竖屏模式**：
- 紧凑布局
- 工具栏优化
- 适应窄屏

**方向切换**：
- 自动检测
- 平滑过渡
- 保持状态

### 性能优化

**特性**：
- 触摸事件防抖
- 减少重绘
- 优化动画
- 内存管理

---

## 数据持久化

### 自动保存

**保存内容**：
- Markdown 内容
- 视图状态
- 颜色主题
- 展开/折叠状态

**保存时机**：
- 内容编辑后
- 视图改变后
- 主题切换后
- 定期自动保存

### 本地存储

**存储位置**：
- 浏览器 localStorage
- 独立的存储空间
- 按域名隔离

**数据验证**：
- 完整性检查
- 版本兼容
- 错误恢复

### 数据恢复

**功能**：
- 自动加载上次内容
- 恢复视图状态
- 恢复用户设置
- 处理损坏数据

---

## 撤销重做系统

### 撤销功能

**支持操作**：
- 备注编辑
- 内容修改
- 节点操作

**快捷键**：
- `Ctrl+Z` / `Cmd+Z`

**特性**：
- 多级撤销
- 历史栈管理
- 状态恢复

### 重做功能

**快捷键**：
- `Ctrl+Y` / `Ctrl+Shift+Z` (Windows)
- `Cmd+Shift+Z` (Mac)

**特性**：
- 重做撤销的操作
- 保持操作顺序
- 清晰的状态管理

### 历史管理

**特性**：
- 限制历史栈大小（默认 50）
- 自动清理旧记录
- 内存优化
- 持久化历史

---

## 工具栏系统

### Excalidraw 风格

**设计特点**：
- 简洁的图标
- 清晰的分组
- 直观的布局
- 现代化外观

### 工具栏组件

**搜索框**：
- 左侧或浮动位置
- 实时搜索
- 结果导航
- 清除按钮

**功能按钮**：
- 展开全部
- 折叠全部
- 导出菜单
- 颜色选择器

**品牌区域**：
- 右上角位置
- 品牌标识
- 设置按钮
- 帮助链接

### 响应式布局

**大屏幕**：
- 完整工具栏
- 所有按钮可见
- 横向布局

**小屏幕**：
- 折叠菜单
- 优先显示常用功能
- 适应窄屏

---

## 使用场景

### 学习和笔记

**适用于**：
- 课程笔记整理
- 知识点梳理
- 概念关系图
- 学习路径规划

**优势**：
- 可视化知识结构
- 快速查找内容
- 添加详细备注
- 导出分享

### 项目管理

**适用于**：
- 项目结构规划
- 任务分解
- 进度跟踪
- 团队协作

**优势**：
- 清晰的层级关系
- 灵活的展开折叠
- 导出为文档
- 移动端查看

### 演示和讲解

**适用于**：
- 课程讲解
- 产品演示
- 技术分享
- 培训教学

**优势**：
- 逐步展开内容
- 突出重点
- 美观的视觉效果
- 导出为图片

### 头脑风暴

**适用于**：
- 创意整理
- 思路梳理
- 方案对比
- 决策分析

**优势**：
- 快速记录想法
- 灵活调整结构
- 添加备注说明
- 实时编辑

---

## 技术特性

### 性能

**优化措施**：
- 虚拟滚动（大型图）
- 节点懒加载
- 动画节流
- 内存管理

**性能指标**：
- 支持 200+ 节点
- 60fps 流畅动画
- 300ms 内响应
- 低内存占用

### 兼容性

**浏览器支持**：
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

**设备支持**：
- 桌面电脑
- 笔记本
- 平板电脑
- 智能手机

### 安全性

**措施**：
- XSS 防护
- 输入验证
- 数据清理
- CSP 配置

---

## 扩展性

### 插件系统

**支持**：
- 自定义插件
- 钩子机制
- 事件系统
- API 接口

### 自定义配置

**可配置项**：
- 分隔符
- 颜色方案
- 快捷键
- 默认选项

### 集成能力

**支持集成**：
- 作为组件使用
- MCP 服务
- 独立 HTML
- API 调用

---

## 未来规划

### 短期计划

- 更多颜色主题
- 节点样式自定义
- 键盘快捷键配置
- 导出模板

### 长期计划

- 协作编辑
- 云端同步
- 插件市场
- 多格式导入

---

## 总结

Markmap Enhanced 提供了一套完整的思维导图解决方案，具有：

✅ **16 大核心功能**
✅ **10+ 交互特性**
✅ **5 种颜色主题**
✅ **4 种导出格式**
✅ **全平台支持**

无论是学习、工作还是创作，Markmap Enhanced 都能帮助您更好地组织和可视化信息。

---

**开始使用 Markmap Enhanced，让思维可视化！** 🚀
