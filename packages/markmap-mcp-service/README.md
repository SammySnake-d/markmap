# markmap-mcp-service

ä¸€ä¸ªç”¨äºä» Markdown å†…å®¹ç”Ÿæˆäº¤äº’å¼æ€ç»´å¯¼å›¾ HTML æ–‡ä»¶çš„ MCP (Model Context Protocol) æœåŠ¡ã€‚

## æ¦‚è¿°

æœ¬åŒ…æä¾›ä¸€ä¸ª MCP æœåŠ¡å™¨ï¼Œæš´éœ² `generate_mindmap` å·¥å…·ã€‚è¯¥å·¥å…·æ¥æ”¶ Markdown å†…å®¹ï¼Œç”ŸæˆåŒ…å«äº¤äº’å¼æ€ç»´å¯¼å›¾å¯è§†åŒ–çš„ç‹¬ç«‹ HTML æ–‡ä»¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **MCP å…¼å®¹** - æ”¯æŒä»»ä½• MCP å…¼å®¹å®¢æˆ·ç«¯ï¼ˆKiroã€Claude Desktop ç­‰ï¼‰
- ğŸ“ **Markdown è¾“å…¥** - æ”¯æŒæ ‡å‡† Markdown åŠå¢å¼ºçš„å¤‡æ³¨è¯­æ³•
- ğŸ¨ **å¤šç§ä¸»é¢˜** - 5 ç§å†…ç½®é…è‰²æ–¹æ¡ˆ + æ˜æš—æ¨¡å¼
- ğŸ“¤ **ç‹¬ç«‹è¾“å‡º** - ç”Ÿæˆçš„ HTML æ–‡ä»¶å¯ç¦»çº¿ä½¿ç”¨
- âœï¸ **ç¼–è¾‘æ¨¡å¼** - å¯é€‰çš„æµè§ˆå™¨å†…ç¼–è¾‘æ”¯æŒ
- ğŸ” **æœç´¢åŠŸèƒ½** - ç”Ÿæˆæ–‡ä»¶å†…ç½®æœç´¢åŠŸèƒ½
- ğŸ“± **ç§»åŠ¨ç«¯æ”¯æŒ** - è§¦æ‘¸æ‰‹åŠ¿ç¼©æ”¾å’Œå¹³ç§»

## å®‰è£…

```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm add markmap-mcp-service

# ä½¿ç”¨ npm
npm install markmap-mcp-service

# ä½¿ç”¨ yarn
yarn add markmap-mcp-service
```

## å¿«é€Ÿå¼€å§‹

### 1. é…ç½® MCP å®¢æˆ·ç«¯

å°†æœåŠ¡æ·»åŠ åˆ° MCP å®¢æˆ·ç«¯é…ç½®ä¸­ï¼š

**Kiro/Claude Desktop é…ç½®ï¼š**

```json
{
  "mcpServers": {
    "markmap": {
      "command": "node",
      "args": ["path/to/node_modules/markmap-mcp-service/dist/index.js"]
    }
  }
}
```

**å…¨å±€å®‰è£…åï¼š**

```json
{
  "mcpServers": {
    "markmap": {
      "command": "markmap-mcp"
    }
  }
}
```

### 2. ä½¿ç”¨å·¥å…·

é…ç½®å®Œæˆåï¼Œå³å¯ä½¿ç”¨ `generate_mindmap` å·¥å…·ä» Markdown å†…å®¹åˆ›å»ºæ€ç»´å¯¼å›¾ HTML æ–‡ä»¶ã€‚

### 3. è‡ªå®šä¹‰é»˜è®¤é…ç½®

é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®é»˜è®¤å€¼ï¼š

```json
{
  "mcpServers": {
    "markmap": {
      "command": "node",
      "args": ["path/to/markmap-mcp-service/dist/index.js"],
      "env": {
        "MARKMAP_NOTE_SEPARATOR": "|",
        "MARKMAP_NOTE_BLOCK": "#",
        "MARKMAP_COLOR_SCHEME": "ocean",
        "MARKMAP_THEME": "dark"
      }
    }
  }
}
```

**å¯ç”¨ç¯å¢ƒå˜é‡ï¼š**

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|----------|------|--------|
| `MARKMAP_NOTE_SEPARATOR` | å•è¡Œå¤‡æ³¨åˆ†éš”ç¬¦ | `:` |
| `MARKMAP_NOTE_BLOCK` | å¤šè¡Œå¤‡æ³¨å—æ ‡è®° | `>` |
| `MARKMAP_ESCAPE` | è½¬ä¹‰å­—ç¬¦ | `\\` |
| `MARKMAP_CDN_BASE` | CDN åŸºç¡€è·¯å¾„ | - |
| `MARKMAP_COLOR_SCHEME` | é»˜è®¤é…è‰²æ–¹æ¡ˆ | `default` |
| `MARKMAP_THEME` | é»˜è®¤ä¸»é¢˜ | `light` |

> **æ³¨æ„**ï¼šå·¥å…·è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°ä¼šè¦†ç›–ç¯å¢ƒå˜é‡é…ç½®ã€‚

## å·¥å…·å‚è€ƒ

### generate_mindmap

ä» Markdown ç”Ÿæˆäº¤äº’å¼æ€ç»´å¯¼å›¾ HTML æ–‡ä»¶ã€‚

#### è¾“å…¥å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `markdown` | string | âœ… æ˜¯ | - | Markdown å†…å®¹ |
| `outputPath` | string | âœ… æ˜¯ | - | è¾“å‡º HTML æ–‡ä»¶è·¯å¾„ |
| `title` | string | å¦ | "Mindmap" | é¡µé¢æ ‡é¢˜ |
| `colorScheme` | string | å¦ | "default" | é…è‰²æ–¹æ¡ˆåç§° |
| `enableEdit` | boolean | å¦ | `true` | å¯ç”¨ç¼–è¾‘æ¨¡å¼ |
| `theme` | string | å¦ | "light" | ä¸»é¢˜æ¨¡å¼ |
| `cdnBase` | string | å¦ | "https://cdn.jsdelivr.net/npm" | CDN åŸºç¡€è·¯å¾„ |
| `separators` | object | å¦ | è§ä¸‹è¡¨ | åˆ†éš”ç¬¦é…ç½® |

#### åˆ†éš”ç¬¦é…ç½® (separators)

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `note` | string | ":" | å•è¡Œå¤‡æ³¨åˆ†éš”ç¬¦ |
| `noteBlock` | string | ">" | å¤šè¡Œå¤‡æ³¨å—æ ‡è®° |
| `escape` | string | "\\\\" | è½¬ä¹‰å­—ç¬¦ |

#### é…è‰²æ–¹æ¡ˆ

| åç§° | è¯´æ˜ |
|------|------|
| `default` | é»˜è®¤è“ç´«æ¸å˜ |
| `ocean` | è“ç»¿æµ·æ´‹è‰²è°ƒ |
| `forest` | ç»¿è‰²è‡ªç„¶è‰²è°ƒ |
| `sunset` | æš–æ©™çº¢è‰²è°ƒ |
| `monochrome` | ç°åº¦ |

#### ä¸»é¢˜é€‰é¡¹

| å€¼ | è¯´æ˜ |
|----|------|
| `light` | æµ…è‰²èƒŒæ™¯ï¼ˆé»˜è®¤ï¼‰ |
| `dark` | æ·±è‰²èƒŒæ™¯ |

#### è¾“å‡ºæ ¼å¼

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "filePath": "./output/mindmap.html",
  "message": "Mindmap generated successfully at ./output/mindmap.html"
}
```

**é”™è¯¯å“åº”ï¼š**
```json
{
  "success": false,
  "message": "Failed to generate mindmap: [é”™è¯¯è¯¦æƒ…]",
  "error": "[é”™è¯¯è¯¦æƒ…]"
}
```

## Markdown æ ¼å¼

æœåŠ¡æ”¯æŒå¸¦å¤‡æ³¨è¯­æ³•çš„å¢å¼º Markdownï¼š

### åŸºæœ¬ç»“æ„

```markdown
# ä¸»é¢˜

- èŠ‚ç‚¹ 1
  - å­èŠ‚ç‚¹ 1.1
  - å­èŠ‚ç‚¹ 1.2
- èŠ‚ç‚¹ 2
  - å­èŠ‚ç‚¹ 2.1
```

### å•è¡Œå¤‡æ³¨ï¼ˆä½¿ç”¨ `:`ï¼‰

åœ¨å†’å·åæ·»åŠ ç®€çŸ­å¤‡æ³¨ï¼š

```markdown
- èŠ‚ç‚¹å†…å®¹: è¿™æ˜¯å•è¡Œå¤‡æ³¨
- å¦ä¸€ä¸ªèŠ‚ç‚¹: ç®€çŸ­æè¿°
```

### è¯¦ç»†å¤‡æ³¨ï¼ˆä½¿ç”¨ `>`ï¼‰

ä½¿ç”¨å¼•ç”¨å—æ·»åŠ å¤šè¡Œè¯¦ç»†å¤‡æ³¨ï¼š

```markdown
- èŠ‚ç‚¹å†…å®¹
  > è¿™æ˜¯è¯¦ç»†å¤‡æ³¨
  > å¯ä»¥è·¨å¤šè¡Œ
  > æ”¯æŒ **Markdown** æ ¼å¼
```

### æ··åˆå¤‡æ³¨

åŒæ—¶ä½¿ç”¨å•è¡Œå’Œè¯¦ç»†å¤‡æ³¨ï¼š

```markdown
- èŠ‚ç‚¹å†…å®¹: ç®€çŸ­å•è¡Œå¤‡æ³¨
  > è¯¦ç»†è¯´æ˜
  > æ›´å¤šä¿¡æ¯
```

### è½¬ä¹‰å­—ç¬¦

ä½¿ç”¨åæ–œæ è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼š

```markdown
- å†…å®¹ä¸­åŒ…å« \: å†’å·çš„èŠ‚ç‚¹
- å¦ä¸€ä¸ªèŠ‚ç‚¹: å¤‡æ³¨ä¸­æœ‰ \: è½¬ä¹‰å†’å·
```

## ç¤ºä¾‹

### åŸºæœ¬ç¤ºä¾‹

```json
{
  "markdown": "# æˆ‘çš„é¡¹ç›®\n\n- åŠŸèƒ½ 1\n  - å­åŠŸèƒ½ 1.1\n  - å­åŠŸèƒ½ 1.2\n- åŠŸèƒ½ 2",
  "outputPath": "./output/project.html"
}
```

### å®Œæ•´å‚æ•°ç¤ºä¾‹

```json
{
  "markdown": "# AI å­¦ä¹ è·¯å¾„\n\n- åŸºç¡€: åŸºç¡€çŸ¥è¯†\n  - æ•°å­¦\n    - çº¿æ€§ä»£æ•°\n    - ç»Ÿè®¡å­¦\n  - ç¼–ç¨‹\n    - Python\n    - NumPy\n- æœºå™¨å­¦ä¹ \n  > æ ¸å¿ƒ ML æ¦‚å¿µ\n  > ç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ \n  - å›å½’\n  - åˆ†ç±»",
  "outputPath": "./output/ai-learning.html",
  "title": "AI å­¦ä¹ è·¯å¾„",
  "colorScheme": "ocean",
  "enableEdit": true,
  "theme": "light"
}
```

### è‡ªå®šä¹‰åˆ†éš”ç¬¦ç¤ºä¾‹

å¦‚æœä½ çš„ Markdown ä½¿ç”¨ä¸åŒçš„åˆ†éš”ç¬¦æ ¼å¼ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼š

```json
{
  "markdown": "# é¡¹ç›®è®¡åˆ’\n\n- é˜¶æ®µä¸€ | è¿™æ˜¯å¤‡æ³¨\n  - ä»»åŠ¡ 1\n  - ä»»åŠ¡ 2\n- é˜¶æ®µäºŒ\n  # è¯¦ç»†è¯´æ˜\n  # å¤šè¡Œå¤‡æ³¨",
  "outputPath": "./output/custom.html",
  "separators": {
    "note": "|",
    "noteBlock": "#"
  }
}
```

### è‡ªå®šä¹‰ CDN è·¯å¾„ç¤ºä¾‹

```json
{
  "markdown": "# ç¤ºä¾‹\n- èŠ‚ç‚¹ 1\n- èŠ‚ç‚¹ 2",
  "outputPath": "./output/cdn.html",
  "cdnBase": "https://unpkg.com"
}
```

### åªè¯»ç¤ºä¾‹

```json
{
  "markdown": "# æ–‡æ¡£\n\n- ç¬¬ä¸€ç« \n- ç¬¬äºŒç« ",
  "outputPath": "./docs/overview.html",
  "title": "æ–‡æ¡£æ¦‚è§ˆ",
  "enableEdit": false
}
```

## ç”Ÿæˆçš„ HTML åŠŸèƒ½

ç”Ÿæˆçš„ HTML æ–‡ä»¶åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ” **æœç´¢** | æŒ‰å†…å®¹æˆ–å¤‡æ³¨æŸ¥æ‰¾èŠ‚ç‚¹ï¼ˆCmd/Ctrl + Fï¼‰ |
| ğŸ“ **ç¼–è¾‘æ¨¡å¼** | åœ¨æµè§ˆå™¨ä¸­ç›´æ¥ç¼–è¾‘å¤‡æ³¨ |
| ğŸ¨ **é¢œè‰²ä¸»é¢˜** | åˆ‡æ¢é…è‰²æ–¹æ¡ˆ |
| ğŸ“¤ **å¯¼å‡º** | å¯¼å‡ºä¸º PNGã€JPGã€SVG æˆ– Markdown |
| ğŸ“± **ç§»åŠ¨ç«¯æ”¯æŒ** | è§¦æ‘¸æ‰‹åŠ¿ç¼©æ”¾å’Œå¹³ç§» |
| ğŸ’¾ **è‡ªåŠ¨ä¿å­˜** | æ›´æ”¹ä¿å­˜åˆ° localStorage |
| âŒ¨ï¸ **é”®ç›˜å¿«æ·é”®** | æ’¤é”€ï¼ˆCmd/Ctrl+Zï¼‰ã€é‡åšï¼ˆCmd/Ctrl+Shift+Zï¼‰ |
| ğŸ–±ï¸ **ç”»å¸ƒæ§åˆ¶** | æ»šè½®ç¼©æ”¾ã€ç©ºæ ¼+æ‹–æ‹½å¹³ç§» |
| ğŸ–±ï¸ **å³é”®èœå•** | å¤åˆ¶èŠ‚ç‚¹/å­æ ‘ä¸º Markdown |

> **æ³¨æ„**ï¼šMCP æœåŠ¡é»˜è®¤ä½¿ç”¨æœ¬åœ°æ‰“åŒ…æ¨¡å¼ï¼Œç”Ÿæˆçš„ HTML æ–‡ä»¶è¾ƒå¤§ï¼ˆçº¦ 800KB+ï¼‰ï¼Œä½†åŒ…å«å®Œæ•´åŠŸèƒ½ä¸”å¯ç¦»çº¿ä½¿ç”¨ã€‚

## ç¼–ç¨‹æ–¹å¼ä½¿ç”¨

ä¹Ÿå¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼ä½¿ç”¨æœåŠ¡ï¼š

```typescript
import { generateStandaloneHTML } from 'markmap-html-generator';
import * as fs from 'fs';

const markdown = `# æˆ‘çš„æ€ç»´å¯¼å›¾
- ä¸»é¢˜ 1: å¤‡æ³¨
- ä¸»é¢˜ 2`;

const html = generateStandaloneHTML(markdown, {
  title: 'æˆ‘çš„æ€ç»´å¯¼å›¾',
  colorScheme: 'ocean',
  enableEdit: true,
  theme: 'light',
});

fs.writeFileSync('./output/mindmap.html', html);
```

## é”™è¯¯å¤„ç†

æœåŠ¡å¤„ç†å„ç§é”™è¯¯æƒ…å†µï¼š

| é”™è¯¯ç±»å‹ | è¯´æ˜ | å“åº” |
|----------|------|------|
| ç¼ºå°‘å¿…éœ€å­—æ®µ | æœªæä¾› `markdown` æˆ– `outputPath` | éªŒè¯é”™è¯¯ |
| æ— æ•ˆé…è‰²æ–¹æ¡ˆ | æœªçŸ¥çš„é…è‰²æ–¹æ¡ˆåç§° | éªŒè¯é”™è¯¯ |
| æ— æ•ˆä¸»é¢˜ | ä¸»é¢˜ä¸æ˜¯ "light" æˆ– "dark" | éªŒè¯é”™è¯¯ |
| æ–‡ä»¶å†™å…¥é”™è¯¯ | æ— æ³•å†™å…¥è¾“å‡ºè·¯å¾„ | æ–‡ä»¶ç³»ç»Ÿé”™è¯¯ |
| è§£æé”™è¯¯ | æ— æ•ˆçš„ Markdown æ ¼å¼ | è§£æé”™è¯¯ |

## å¼€å‘

```bash
# å®‰è£…ä¾èµ–
pnpm install

# æ„å»º
pnpm build

# è¿è¡Œæµ‹è¯•
pnpm test

# å¯åŠ¨æœåŠ¡å™¨ï¼ˆç”¨äºæµ‹è¯•ï¼‰
pnpm start
```

## ç³»ç»Ÿè¦æ±‚

- Node.js >= 18
- markmap-html-generatorï¼ˆå¯¹ç­‰ä¾èµ–ï¼‰

## è®¸å¯è¯

MIT

## ç›¸å…³åŒ…

- [markmap-html-generator](../markmap-html-generator) - HTML ç”Ÿæˆåº“
- [markmap-lib](../markmap-lib) - Markdown è§£æåº“
- [markmap-view](../markmap-view) - å¯è§†åŒ–åº“
