# Markmap Enhanced

[![Join the chat at https://gitter.im/gera2ld/markmap](https://badges.gitter.im/gera2ld/markmap.svg)](https://gitter.im/gera2ld/markmap?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)

å°† Markdown æ–‡æ¡£å¯è§†åŒ–ä¸ºäº¤äº’å¼æ€ç»´å¯¼å›¾çš„å¢å¼ºç‰ˆå·¥å…·ã€‚

æœ¬é¡¹ç›®åŸºäº [markmap](https://github.com/markmap/markmap) è¿›è¡Œæ·±åº¦äºŒæ¬¡å¼€å‘ï¼Œçµæ„Ÿæ¥æºäº [dundalek's markmap](https://github.com/dundalek/markmap)ã€‚

ğŸ‘‰ [åœ¨çº¿ä½“éªŒ](https://markmap.js.org/repl)

---

## âœ¨ å¢å¼ºåŠŸèƒ½

Markmap Enhanced åœ¨åŸç‰ˆåŸºç¡€ä¸Šæ–°å¢äº†ä»¥ä¸‹å¼ºå¤§åŠŸèƒ½ï¼š

### ğŸ” æ™ºèƒ½æœç´¢
- æ¨¡ç³ŠåŒ¹é…æœç´¢èŠ‚ç‚¹å†…å®¹å’Œå¤‡æ³¨
- è‡ªåŠ¨é«˜äº®å’Œå±•å¼€åŒ¹é…ç»“æœ
- å¿«é€Ÿå¯¼èˆªï¼ˆä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªï¼‰
- æ”¯æŒå¿«æ·é”® `Ctrl+F` / `Cmd+F`

### ğŸ“ å¤‡æ³¨ç³»ç»Ÿ
- **å•è¡Œå¤‡æ³¨**ï¼šä½¿ç”¨å†’å·åˆ†éš” `- èŠ‚ç‚¹: å¤‡æ³¨å†…å®¹`
- **è¯¦ç»†å¤‡æ³¨**ï¼šä½¿ç”¨å¼•ç”¨å— `> è¯¦ç»†è¯´æ˜`
- å¤‡æ³¨å›¾æ ‡æ˜¾ç¤ºå’Œé¢æ¿ç¼–è¾‘
- å®æ—¶ä¿å­˜å’Œæ’¤é”€/é‡åšæ”¯æŒ

### ğŸ¯ å±•å¼€/æŠ˜å æ§åˆ¶
- ä¸€é”®å±•å¼€/æŠ˜å å…¨éƒ¨èŠ‚ç‚¹
- èŠ‚ç‚¹çº§åˆ«çš„å­æ ‘å±•å¼€/æŠ˜å 
- å³é”®èœå•å¿«é€Ÿæ“ä½œ
- å¹³æ»‘åŠ¨ç”»è¿‡æ¸¡

### ğŸ“¤ å¤šæ ¼å¼å¯¼å‡º
- **Markdown**ï¼šå¤åˆ¶èŠ‚ç‚¹å­æ ‘ä¸º Markdown
- **å›¾ç‰‡**ï¼šå¯¼å‡ºä¸º PNGã€JPGã€SVG æ ¼å¼
- ä¿æŒå±‚çº§ç»“æ„å’Œå¤‡æ³¨æ ¼å¼
- ä¸€é”®ä¸‹è½½

### ğŸ¨ é¢œè‰²ä¸»é¢˜
- 5+ é¢„è®¾ä¸»é¢˜ï¼ˆDefaultã€Oceanã€Forestã€Sunsetã€Monochromeï¼‰
- å¹³æ»‘é¢œè‰²è¿‡æ¸¡åŠ¨ç”»
- ä¸»é¢˜è‡ªåŠ¨ä¿å­˜
- è‡ªå®šä¹‰é¢œè‰²æ”¯æŒ

### ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–
- è§¦æ‘¸æ‰‹åŠ¿æ”¯æŒï¼ˆæ‹–åŠ¨ã€æåˆç¼©æ”¾ï¼‰
- å“åº”å¼å¸ƒå±€è‡ªé€‚åº”
- å±å¹•æ–¹å‘è‡ªåŠ¨è°ƒæ•´
- ç§»åŠ¨ç«¯ä¼˜åŒ–çš„å·¥å…·æ 

### ğŸ® ç”»å¸ƒäº¤äº’
- `Space` + æ‹–åŠ¨å¹³ç§»ç”»å¸ƒ
- é¼ æ ‡æ»šè½®ç¼©æ”¾
- å³é”®ä¸Šä¸‹æ–‡èœå•
- æµç•…çš„ 60fps åŠ¨ç”»

### ğŸ’¾ æ•°æ®æŒä¹…åŒ–
- è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
- ç¼–è¾‘å†å²æŒä¹…åŒ–
- è§†å›¾çŠ¶æ€ä¿å­˜
- æ•°æ®å®Œæ•´æ€§éªŒè¯

### âš¡ å…¶ä»–ç‰¹æ€§
- æ’¤é”€/é‡åšåŠŸèƒ½ï¼ˆ`Ctrl+Z` / `Cmd+Z`ï¼‰
- Excalidraw é£æ ¼å·¥å…·æ 
- è‡ªåŠ¨åŠ¨æ€å¸ƒå±€
- è½¬ä¹‰å­—ç¬¦æ”¯æŒ
- è‡ªå®šä¹‰åˆ†éš”ç¬¦é…ç½®

---

## ğŸ“¦ å®‰è£…

### ä½¿ç”¨ npm

```bash
npm install markmap-lib markmap-view markmap-toolbar
```

### ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰

```bash
pnpm add markmap-lib markmap-view markmap-toolbar
```

### ä½¿ç”¨ yarn

```bash
yarn add markmap-lib markmap-view markmap-toolbar
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨

```typescript
import { Transformer } from 'markmap-lib';
import { Markmap } from 'markmap-view';

// åˆ›å»º Transformer
const transformer = new Transformer();

// è§£æ Markdown
const markdown = `
# ä¸»é¢˜
## å­ä¸»é¢˜ 1: è¿™æ˜¯å•è¡Œå¤‡æ³¨
- è¦ç‚¹ 1
  > è¿™æ˜¯è¯¦ç»†å¤‡æ³¨
  > å¯ä»¥å¤šè¡Œ
- è¦ç‚¹ 2
## å­ä¸»é¢˜ 2
- è¦ç‚¹ 3
`;

const { root } = transformer.transform(markdown);

// æ¸²æŸ“æ€ç»´å¯¼å›¾
const svg = document.querySelector('#mindmap');
const mm = Markmap.create(svg, {
  colorScheme: 'ocean',
  enableTouch: true,
  autoSave: true
});

mm.setData(root);
mm.fit();
```

### ä½¿ç”¨å·¥å…·æ 

```typescript
import { EnhancedToolbar } from 'markmap-toolbar';

// åˆ›å»ºå·¥å…·æ 
const toolbar = new EnhancedToolbar(document.querySelector('#toolbar'), {
  showSearch: true,
  showExpandCollapse: true,
  showExport: true,
  showColorPicker: true
});

// ç»‘å®šäº‹ä»¶
toolbar.onSearch = (keyword) => mm.search(keyword);
toolbar.onExpandAll = () => mm.expandAll();
toolbar.onCollapseAll = () => mm.collapseAll();
toolbar.onExport = (format) => {
  if (format === 'markdown') {
    const md = mm.exportAsMarkdown();
    navigator.clipboard.writeText(md);
  } else {
    mm.exportAsImage(format);
  }
};
toolbar.onColorSchemeChange = (scheme) => mm.setColorScheme(scheme);
```

### è‡ªå®šä¹‰åˆ†éš”ç¬¦

```typescript
const transformer = new Transformer({
  separators: {
    note: '::',        // è‡ªå®šä¹‰å¤‡æ³¨åˆ†éš”ç¬¦
    noteBlock: '>>',   // è‡ªå®šä¹‰å¤‡æ³¨å—æ ‡è®°
    escape: '\\'       // è½¬ä¹‰å­—ç¬¦
  }
});
```

---

## ğŸ“– æ–‡æ¡£

å®Œæ•´çš„æ–‡æ¡£èµ„æºï¼š

- **[ç”¨æˆ·æŒ‡å—](./USER_GUIDE.md)** - è¯¦ç»†çš„åŠŸèƒ½è¯´æ˜å’Œä½¿ç”¨æ•™ç¨‹
- **[å¿«æ·é”®é€ŸæŸ¥è¡¨](./KEYBOARD_SHORTCUTS.md)** - æ‰€æœ‰å¿«æ·é”®å’Œæ“ä½œ
- **[åŠŸèƒ½ç‰¹æ€§](./FEATURES.md)** - æ·±å…¥äº†è§£æ‰€æœ‰åŠŸèƒ½
- **[API æ–‡æ¡£](./api/README.md)** - å¼€å‘è€… API å‚è€ƒ
- **[æ–‡æ¡£ç´¢å¼•](./DOCUMENTATION_INDEX.md)** - å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€æ–‡æ¡£

### å¼€å‘æ–‡æ¡£

- **[éœ€æ±‚æ–‡æ¡£](../.kiro/specs/markmap-enhanced/requirements.md)** - åŠŸèƒ½éœ€æ±‚è¯´æ˜
- **[è®¾è®¡æ–‡æ¡£](../.kiro/specs/markmap-enhanced/design.md)** - ç³»ç»Ÿæ¶æ„å’Œè®¾è®¡
- **[æµ‹è¯•æ¡†æ¶](./TEST_FRAMEWORK_SETUP.md)** - æµ‹è¯•ç¯å¢ƒé…ç½®

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### å¤‡æ³¨åŠŸèƒ½

```markdown
# é¡¹ç›®ç®¡ç†
## éœ€æ±‚åˆ†æ: ç¬¬ä¸€é˜¶æ®µ
- ç”¨æˆ·è°ƒç ”
  > ç›®æ ‡ç”¨æˆ·ï¼šä¼ä¸šç”¨æˆ·
  > è°ƒç ”æ–¹å¼ï¼šé—®å· + è®¿è°ˆ
  > æ—¶é—´ï¼š2å‘¨
- ç«å“åˆ†æ: åˆ†æ3-5ä¸ªç«å“
```

### æœç´¢åŠŸèƒ½

```typescript
// æœç´¢èŠ‚ç‚¹
const results = mm.search('ç”¨æˆ·');

// å¯¼èˆªåˆ°ä¸‹ä¸€ä¸ªç»“æœ
mm.navigateToNext();

// æ¸…é™¤æœç´¢
mm.clearSearch();
```

### å±•å¼€/æŠ˜å 

```typescript
// å±•å¼€æ‰€æœ‰èŠ‚ç‚¹
mm.expandAll();

// æŠ˜å æ‰€æœ‰èŠ‚ç‚¹
mm.collapseAll();

// å±•å¼€ç‰¹å®šèŠ‚ç‚¹çš„å­æ ‘
mm.expandAll(specificNode);
```

### å¯¼å‡ºåŠŸèƒ½

```typescript
// å¯¼å‡ºä¸º Markdown
const markdown = mm.exportAsMarkdown();

// å¯¼å‡ºä¸º PNG
const pngBlob = await mm.exportAsPNG();

// å¯¼å‡ºä¸º SVG
const svgString = mm.exportAsSVG();
```

### é¢œè‰²ä¸»é¢˜

```typescript
// è®¾ç½®ä¸»é¢˜
mm.setColorScheme('ocean');

// è·å–å¯ç”¨ä¸»é¢˜
const schemes = mm.getAvailableColorSchemes();

// è‡ªå®šä¹‰ä¸»é¢˜
mm.setColorScheme({
  name: 'custom',
  colors: ['#5e6ad2', '#26b5ce', '#f9c52a', '#f98e52', '#e29578']
});
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### å­¦ä¹ å’Œç¬”è®°
- è¯¾ç¨‹ç¬”è®°æ•´ç†
- çŸ¥è¯†ç‚¹æ¢³ç†
- æ¦‚å¿µå…³ç³»å›¾
- å­¦ä¹ è·¯å¾„è§„åˆ’

### é¡¹ç›®ç®¡ç†
- é¡¹ç›®ç»“æ„è§„åˆ’
- ä»»åŠ¡åˆ†è§£
- è¿›åº¦è·Ÿè¸ª
- å›¢é˜Ÿåä½œ

### æ¼”ç¤ºå’Œè®²è§£
- è¯¾ç¨‹è®²è§£
- äº§å“æ¼”ç¤º
- æŠ€æœ¯åˆ†äº«
- åŸ¹è®­æ•™å­¦

### å¤´è„‘é£æš´
- åˆ›æ„æ•´ç†
- æ€è·¯æ¢³ç†
- æ–¹æ¡ˆå¯¹æ¯”
- å†³ç­–åˆ†æ

---

## ğŸ”§ å¼€å‘

### ç¯å¢ƒè¦æ±‚

- Node.js >= 22
- pnpm >= 8

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### æ„å»º

```bash
# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# æ„å»ºç‰¹å®šåŒ…
pnpm --filter markmap-lib build
pnpm --filter markmap-view build
pnpm --filter markmap-toolbar build
```

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# è¿è¡Œç‰¹å®šåŒ…çš„æµ‹è¯•
pnpm --filter markmap-lib test
pnpm --filter markmap-view test

# è¿è¡Œå±æ€§æµ‹è¯•
pnpm test -- --grep "Property"
```

### ä»£ç æ£€æŸ¥

```bash
# æ£€æŸ¥ä»£ç 
pnpm lint

# è‡ªåŠ¨ä¿®å¤
pnpm lint:fix
```

---

## ğŸŒŸ ç›¸å…³é¡¹ç›®

Markmap ä¹Ÿå¯åœ¨ä»¥ä¸‹å¹³å°ä½¿ç”¨ï¼š

- **[VSCode](https://marketplace.visualstudio.com/items?itemName=gera2ld.markmap-vscode)** å’Œ **[Open VSX](https://open-vsx.org/extension/gera2ld/markmap-vscode)**
- **Vim / Neovim**:
  - [coc-markmap](https://github.com/gera2ld/coc-markmap) ![NPM](https://img.shields.io/npm/v/coc-markmap.svg) - åŸºäº [coc.nvim](https://github.com/neoclide/coc.nvim)
  - [markmap.vim](https://github.com/Zeioth/markmap.nvim) - æ— éœ€ coc.nvim
- **Emacs**: [eaf-markmap](https://github.com/emacs-eaf/eaf-markmap) - åŸºäº [EAF](https://github.com/emacs-eaf/emacs-application-framework)
- **MCP Server**: [markmap-mcp-server](https://github.com/jinzcdev/markmap-mcp-server) [![NPM Version](https://img.shields.io/npm/v/@jinzcdev/markmap-mcp-server.svg)](https://www.npmjs.com/package/@jinzcdev/markmap-mcp-server) - åŸºäº [MCP TypeScript SDK](https://github.com/modelcontextprotocol/typescript-sdk)

---

## ğŸ“Š æ€§èƒ½

- âœ… æ”¯æŒ 200+ èŠ‚ç‚¹
- âœ… 60fps æµç•…åŠ¨ç”»
- âœ… 300ms å†…å“åº”
- âœ… ä½å†…å­˜å ç”¨
- âœ… ç§»åŠ¨ç«¯ä¼˜åŒ–

---

## ğŸŒ æµè§ˆå™¨å…¼å®¹æ€§

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

### è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### æŠ¥å‘Šé—®é¢˜

åœ¨ [GitHub Issues](https://github.com/markmap/markmap/issues) ä¸­æŠ¥å‘Šé—®é¢˜æ—¶ï¼Œè¯·æä¾›ï¼š

- é—®é¢˜æè¿°
- å¤ç°æ­¥éª¤
- é¢„æœŸè¡Œä¸º
- å®é™…è¡Œä¸º
- ç¯å¢ƒä¿¡æ¯ï¼ˆæµè§ˆå™¨ã€ç‰ˆæœ¬ç­‰ï¼‰

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢ [dundalek](https://github.com/dundalek) åˆ›å»ºäº†åŸå§‹çš„ markmap é¡¹ç›®
- æ„Ÿè°¢ [gera2ld](https://github.com/gera2ld) ç»´æŠ¤å’Œæ”¹è¿› markmap
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„æ”¯æŒå’Œè´¡çŒ®

---

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub Issues**: [æäº¤é—®é¢˜](https://github.com/markmap/markmap/issues)
- **Gitter Chat**: [åŠ å…¥è®¨è®º](https://gitter.im/gera2ld/markmap)
- **å®˜æ–¹æ–‡æ¡£**: [markmap.js.org](https://markmap.js.org/)

---

**å¼€å§‹ä½¿ç”¨ Markmap Enhancedï¼Œè®©æ€ç»´å¯è§†åŒ–ï¼** ğŸš€
